generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model cidades {
  id       Int       @id @default(autoincrement())
  nome     String    @db.VarChar(100)
  estadoId Int
  estados  estados   @relation(fields: [estadoId], references: [id], onDelete: NoAction, map: "cidades_ibfk_1")
  usuario  usuario[]

  @@index([estadoId], map: "estadoId")
}

model doencas_deficiencias {
  id                   Int                    @id @default(autoincrement())
  nome                 String                 @db.VarChar(100)
  petdoencadeficiencia petdoencadeficiencia[]
}

model especies {
  id    Int     @id @default(autoincrement())
  nome  String  @db.VarChar(100)
  racas racas[]
}

model estados {
  id      Int       @id @default(autoincrement())
  nome    String    @db.VarChar(255)
  sigla   String    @db.VarChar(255)
  cidades cidades[]
}

model faixas_etarias {
  id         Int     @id @default(autoincrement())
  nome       String  @db.VarChar(50)
  idade_max  Int?
  idade_min  Int?
  unidade    String? @db.VarChar(10)
  especie_id Int
}

model favoritos {
  id        Int      @id @default(autoincrement())
  usuarioId Int
  petId     Int
  createdAt DateTime @db.DateTime(0)
  updatedAt DateTime @db.DateTime(0)
  usuario   usuario  @relation(fields: [usuarioId], references: [id], onDelete: NoAction, map: "favoritos_ibfk_1")
  pets      pets     @relation(fields: [petId], references: [id], onDelete: NoAction, map: "favoritos_ibfk_2")

  @@index([petId], map: "petId")
  @@index([usuarioId], map: "usuarioId")
}

model pets {
  id                   Int                    @id @default(autoincrement())
  especie_id           Int?
  nome                 String                 @db.VarChar(255)
  quantidade           Int
  raca_id              Int?
  idade                Int
  faixa_etaria_id      Int?
  usuario_id           Int?
  sexo                 String                 @db.VarChar(15)
  motivoDoacao         String                 @db.VarChar(255)
  status_id            Int?
  foto                 Bytes?                 @db.Blob
  cidade_id            Int
  favoritos            favoritos[]
  petdoencadeficiencia petdoencadeficiencia[]
}

model racas {
  id         Int      @id @default(autoincrement())
  nome       String   @db.VarChar(255)
  especie_id Int
  especies   especies @relation(fields: [especie_id], references: [id], onDelete: NoAction, map: "racas_ibfk_1")

  @@index([especie_id], map: "especie_id")
}

model status {
  id   Int    @id @default(autoincrement())
  nome String @db.VarChar(100)
}

model usuario {
  id        Int         @id @default(autoincrement())
  nome      String      @db.VarChar(100)
  sexo      String      @db.VarChar(100)
  telefone  String      @db.VarChar(9)
  email     String      @unique(map: "email") @db.VarChar(255)
  senha     String      @db.VarChar(12)
  cpf       String      @unique(map: "cpf") @db.VarChar(14)
  cep       String?     @db.VarChar(10)
  cidadeId  Int
  favoritos favoritos[]
  cidades   cidades     @relation(fields: [cidadeId], references: [id], onDelete: NoAction, map: "usuario_ibfk_1")

  @@index([cidadeId], map: "cidadeId")
}

model petdoencadeficiencia {
  pet_id               Int
  doencaDeficiencia_id Int
  possui               Boolean              @default(true)
  pets                 pets                 @relation(fields: [pet_id], references: [id], onDelete: Cascade, map: "petdoencadeficiencia_ibfk_1")
  doencas_deficiencias doencas_deficiencias @relation(fields: [doencaDeficiencia_id], references: [id], onDelete: Cascade, map: "petdoencadeficiencia_ibfk_2")

  @@id([pet_id, doencaDeficiencia_id])
  @@index([doencaDeficiencia_id], map: "doencaDeficiencia_id")
}
